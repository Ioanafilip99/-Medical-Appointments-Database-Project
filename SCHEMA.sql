--GENERAREA BAZEI DE DATE

-- DEPARTAMENTE
CREATE TABLE DEPARTAMENTE_IFI
(id_departament NUMBER(4) PRIMARY KEY,
nume VARCHAR(30) NOT NULL);

DESC DEPARTAMENTE_IFI;

INSERT INTO DEPARTAMENTE_IFI
VALUES(100, 'Cardiologie');
INSERT INTO DEPARTAMENTE_IFI
VALUES(101, 'Chirurgie');
INSERT INTO DEPARTAMENTE_IFI
VALUES(102, 'Oftalmologie');
INSERT INTO DEPARTAMENTE_IFI
VALUES(103, 'Pneumologie');
INSERT INTO DEPARTAMENTE_IFI
VALUES(104, 'Boli infectioase');

SELECT * FROM DEPARTAMENTE_IFI;


-- MEDICI
CREATE TABLE MEDICI_IFI
(id_medic NUMBER(4) NOT NULL,
nume VARCHAR2(30) NOT NULL,
prenume VARCHAR(30) NOT NULL,
nr_telefon VARCHAR(10),
email VARCHAR(30),
id_departament NUMBER(4) NOT NULL,
PRIMARY KEY(id_medic),
FOREIGN KEY(id_departament) REFERENCES DEPARTAMENTE_IFI(id_departament));

DESC MEDICI_IFI;

INSERT INTO MEDICI_IFI
VALUES(100, 'Fieraru', 'Diana-Maria', '07XXXXXXXX', 'fieraru@gmail.com', 101);
INSERT INTO MEDICI_IFI
VALUES(101, 'Stancu', 'Mario', '07XXXXXXXX', NULL, 100);
INSERT INTO MEDICI_IFI
VALUES(102, 'Capanu', 'Andreea', NULL, 'capanu@gmail.com', 103);
INSERT INTO MEDICI_IFI
VALUES(103, 'Filimon', 'Iustin', NULL, NULL, 104);
INSERT INTO MEDICI_IFI
VALUES(104, 'Ivan', 'Laura-Maria', '07XXXXXXXX', NULL, 102);
INSERT INTO MEDICI_IFI
VALUES(105, 'Dobre', 'Andreea', '07XXXXXXXX', NULL, 103);

SELECT * FROM MEDICI_IFI;


-- SERVICII
CREATE TABLE SERVICII_IFI
(id_serviciu NUMBER(4) PRIMARY KEY,
denumire VARCHAR(50) NOT NULL,
descriere VARCHAR(150),
pret NUMBER(8) NOT NULL);

ALTER TABLE SERVICII_IFI
ADD id_departament NUMBER(4);

ALTER TABLE SERVICII_IFI
ADD CONSTRAINT id_departament FOREIGN KEY (id_departament) REFERENCES DEPARTAMENTE_IFI(id_departament);

DESC SERVICII_IFI;

INSERT INTO SERVICII_IFI
VALUES(100, 'Ecografie Doppler vascular', 'artere membre sup/inf/carotide', 250, 100);
INSERT INTO SERVICII_IFI
VALUES(101, 'Excizie tumori cutanate mici', NULL, 800, 101);
INSERT INTO SERVICII_IFI
VALUES(102, 'Excizie tumori cutanate medii', 'incl. ex.HP', 1200, 101);
INSERT INTO SERVICII_IFI
VALUES(103, 'Excizie tumori cutanate mari', 'reparare cu lambou cutanat; incl.HP', 1600, 101);
INSERT INTO SERVICII_IFI
VALUES(104, 'Consultatie completa oftalmologie', 'Examen digital biomicroscopic al polului anterior, tensiunea intraoculara, tehnologie laser autofluorescent, prescriptie de ochelari', 150, 102);
INSERT INTO SERVICII_IFI
VALUES(105, 'Pachet consultatie glaucom', 'tomografie nerv optic, gonioscopie, camp vizual Hamphrey static + dinamic, pahimetrie + tonometrie', 400, 102);
INSERT INTO SERVICII_IFI
VALUES(106, 'Radiografie pulmonara', NULL, 150, 103);
INSERT INTO SERVICII_IFI
VALUES(107, 'Test FibroScan', NULL, 350, 104);
        
SELECT * FROM SERVICII_IFI;


-- PACIENTI
CREATE TABLE PACIENTI_IFI
(cnp VARCHAR(13) PRIMARY KEY,
nume VARCHAR(30) NOT NULL,
prenume VARCHAR(30) NOT NULL,
nr_telefon VARCHAR(10) NOT NULL,
email VARCHAR(30));

DESC PACIENTI_IFI;

INSERT INTO PACIENTI_IFI
VALUES('1111111111111', 'Filip', 'Ioana', '07XXXXXXXX', 'filip@gmail.com');
INSERT INTO PACIENTI_IFI
VALUES('2222222222222', 'Filip', 'Denisa', '07XXXXXXXX', NULL);
INSERT INTO PACIENTI_IFI
VALUES('3333333333333', 'Simion', 'Andrei', '07XXXXXXXX', 'simion@gmail.com');
INSERT INTO PACIENTI_IFI
VALUES('4444444444444', 'Capitanu', 'Diana', '07XXXXXXXX', 'capitanu@gmail.com');
INSERT INTO PACIENTI_IFI
VALUES('5555555555555', 'Stanciu', 'Mihai', '07XXXXXXXX', NULL);

SELECT * FROM PACIENTI_IFI;


-- RETETE
CREATE TABLE RETETE_IFI
(id_reteta NUMBER(15) PRIMARY KEY,
data DATE DEFAULT SYSDATE,
cnp_pacient VARCHAR(13) NOT NULL,
FOREIGN KEY (cnp_pacient) REFERENCES PACIENTI_IFI(cnp));

DESC RETETE_IFI;

INSERT INTO RETETE_IFI
VALUES(100, '20-Mar-2017', '1111111111111');
INSERT INTO RETETE_IFI
VALUES(101, '7-Dec-2015', '1111111111111');
INSERT INTO RETETE_IFI
VALUES(102, '25-Mar-2013', '3333333333333');
INSERT INTO RETETE_IFI
VALUES(103, '13-Jan-2017', '5555555555555');
INSERT INTO RETETE_IFI
VALUES(104, '9-Nov-2011', '2222222222222');
INSERT INTO RETETE_IFI
VALUES(105, '20-Mar-2014', '3333333333333');
INSERT INTO RETETE_IFI
VALUES(106, '2-Jun-2014', '1111111111111');
INSERT INTO RETETE_IFI
VALUES(107, '7-Jun-2014', '4444444444444');
INSERT INTO RETETE_IFI
VALUES(108, '20-Jan-2016', '5555555555555');
INSERT INTO RETETE_IFI
VALUES(109, '7-Sep-2012', '4444444444444');

SELECT * FROM RETETE_IFI;


--PROGRAMARI
CREATE TABLE PROGRAMARI_IFI
(id_programare NUMBER(15) PRIMARY KEY,
data DATE DEFAULT SYSDATE,
ora VARCHAR(5) NOT NULL,
id_medic NUMBER(4) NOT NULL,
cnp_pacient VARCHAR(13) NOT NULL,
id_serviciu NUMBER(4) NOT NULL,
FOREIGN KEY(id_medic) REFERENCES MEDICI_IFI(id_medic),
FOREIGN KEY (cnp_pacient) REFERENCES PACIENTI_IFI(cnp),
FOREIGN KEY(id_serviciu) REFERENCES SERVICII_IFI(id_serviciu));

DESC PROGRAMARI_IFI;

INSERT INTO PROGRAMARI_IFI
VALUES(100, '20-Mar-2017', '10:00', 103, '1111111111111', 107);
INSERT INTO PROGRAMARI_IFI
VALUES(101, '7-Dec-2015', '16:00', 100, '1111111111111', 103);
INSERT INTO PROGRAMARI_IFI
VALUES(102, '25-Mar-2013', '9:30', 102, '3333333333333', 106);
INSERT INTO PROGRAMARI_IFI
VALUES(103, '13-Jan-2017', '13:10', 104, '5555555555555', 104);
INSERT INTO PROGRAMARI_IFI
VALUES(104, '9-Nov-2011', '10:00', 100, '2222222222222', 101);
INSERT INTO PROGRAMARI_IFI
VALUES(105, '20-Mar-2014', '18:00', 100, '3333333333333', 103);
INSERT INTO PROGRAMARI_IFI
VALUES(106, '2-Jun-2014', '16:40', 101, '1111111111111', 100);
INSERT INTO PROGRAMARI_IFI
VALUES(107, '7-Jun-2014', '10:30', 104, '4444444444444', 105);
INSERT INTO PROGRAMARI_IFI
VALUES(108, '20-Jan-2016', '11:00', 103, '5555555555555', 107);
INSERT INTO PROGRAMARI_IFI
VALUES(109, '7-Sep-2012', '20:00', 100, '4444444444444', 102);

SELECT * FROM PROGRAMARI_IFI;








